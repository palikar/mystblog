<!DOCTYPE html>






































<html
  class="not-ready text-sm lg:text-base"
  style="--bg: #faf6f1"
  lang="en-us">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>Notes on learning Pandas - Stanislav Arnaudov</title>

  
  <meta name="theme-color" />
  
  <meta name="description" content="For transparency&rsquo;s sake - those are my notes while learning about pandas from this tutorial. At times this here is just copy-paste from it, at others, it&rsquo;s my own thoughts and explanations. This is meant to be a condensed version of the tutorial more or less just for me. If you found it useful though, well, good for you, I guess.
Abstract Basic pandas is a Python package providing fast, flexible, and expressive data structures designed to make working with &ldquo;relational Heterogeneous data&rdquo; or &ldquo;labeled&rdquo; data both easy and intuitive." />
  <meta
    name="author"
    content="[Stanislav Arnaudov]"
  />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="/main.min.css" />

  
  <script
    defer
    src="highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
   
  <link rel="preload" as="image" href="theme.png" />

  
  
  
  <link rel="preload" as="image" href="https://www.gravatar.com/avatar/6f49be4b1398e1936dd765ef2df3a6f2?s=160&amp;d=identicon" />
  
  

  
  <link rel="preload" as="image" href="github.svg" />
  
  <link rel="preload" as="image" href="linkedin.svg" />
  
  <link rel="preload" as="image" href="facebook.svg" />
  

  
  <link rel="icon" href="favicon.ico" />
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.110.0">

  
  

  
  
  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-158773896-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-158773896-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
  
  
  
  <meta property="og:title" content="Notes on learning Pandas" />
<meta property="og:description" content="My notes on pandas when I started looking into the library" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/pandas_notes/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-13T00:00:00+02:00" />
<meta property="article:modified_time" content="2023-02-09T23:51:41+02:00" />

  
  <meta itemprop="name" content="Notes on learning Pandas">
<meta itemprop="description" content="My notes on pandas when I started looking into the library"><meta itemprop="datePublished" content="2018-07-13T00:00:00+02:00" />
<meta itemprop="dateModified" content="2023-02-09T23:51:41+02:00" />
<meta itemprop="wordCount" content="3928">
<meta itemprop="keywords" content="" />
  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Notes on learning Pandas"/>
<meta name="twitter:description" content="My notes on pandas when I started looking into the library"/>

  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center">
  <div class="relative z-50 mr-auto flex items-center">

    <img alt="" src='/logos/SA.png' width="48" height="48"/>
    <a class="-translate-x-[1px] -translate-y-0.5 text-3xl font-bold ml-6" href="">
      Stanislav Arnaudov
    </a>

    <a class="btn-dark ml-6 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]">
    </a>
  </div>

  <a
    class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
  ></a>

  
  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = `"#faf6f1"`.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    
    <nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6">
      
      <a
        class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal"
        href="/"
        >Home</a
      >
      
      <a
        class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal"
        href="/about/"
        >About</a
      >
      
      <a
        class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal"
        href="/projects"
        >Projects</a
      >
      
      <a
        class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal"
        href="/posts/"
        >Posts</a
      >
      
      <a
        class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal"
        href="/contact/"
        >Contact</a
      >
      
    </nav>
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 dark:invert lg:mt-0 lg:ml-12 lg:items-center lg:space-x-6"
    >
      
      <a
        class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href=" https://github.com/palikar "
        target="_blank"
      ></a>
      
      <a
        class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./linkedin.svg)"
        href=" https://linkedin.com/in/stanislav-arnaudov-37b475164 "
        target="_blank"
      ></a>
      
      <a
        class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./facebook.svg)"
        href=" https://facebook.com/stanislav.ts "
        target="_blank"
      ></a>
      
    </nav>
    
  </div>
</header>


    <main class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-4 pt-20 pb-32 dark:prose-invert">
      

<article>
  <header class="mb-20">

    <h1 class="!my-0 pb-2.5">Notes on learning Pandas</h1>

    
    <div class="text-sm opacity-60">
      
      <time>Jul 13, 2018</time>
      
      
      <span class="mx-1">&middot;</span>
      <span>[Stanislav Arnaudov]</span>
      <span class="mx-1">&middot;</span>
      <span>18 minute read</span>
      <span class="mx-1">&middot;</span>
      <span>3928 words</span>
      
    </div>
    
  </header>

  <section><div class="NOTES">
  <div></div>
<p>For transparency&rsquo;s sake - those are my notes while learning about <em>pandas</em> from <a href="https://www.tutorialspoint.com/python%5Fpandas/index.htm%20">this</a> tutorial. At times this here is just copy-paste from it, at others, it&rsquo;s my own thoughts and explanations. This is meant to be a condensed version of the tutorial more or less just for me. If you found it useful though, well, good for you, I guess.</p>
</div>
<h2 id="abstract">Abstract</h2>
<h3 id="basic">Basic</h3>
<p><strong>pandas</strong> is a Python package providing fast, flexible, and expressive data structures designed to make working with &ldquo;relational Heterogeneous data&rdquo; or &ldquo;labeled&rdquo; data both easy and intuitive. It aims to be the fundamental high-level building block for doing practical, <strong>real world</strong> data analysis in Python. Additionally, it has the broader goal of becoming the most powerful and flexible open-source data analysis/manipulation tool available in any language. It is already well on its way toward this goal. <br /> <br /> It&rsquo;s like database-like objects to deal with your data.</p>
<ul>
<li>data could be loaded from <em>.csv</em> files and be written again</li>
<li>some basic statistical analysis is possible</li>
</ul>
<h3 id="features">Features</h3>
<p>A shortlist of features as advertised on the official site of <em>pandas</em>.</p>
<ul>
<li>Fast and efficient DataFrame object with the default and customized indexing.</li>
<li>Tools for loading data into in-memory data objects from different file formats.</li>
<li>Data alignment and integrated handling of missing data.</li>
<li>Reshaping and pivoting of data sets.</li>
<li>Label-based slicing, indexing, and subsetting of large data sets.</li>
<li>Columns from a data structure can be deleted or inserted.</li>
<li>Group by data for aggregation and transformations.</li>
<li>High-performance merging and joining of data.</li>
<li>Time Series functionality.</li>
</ul>
<h3 id="tl-dr">Tl;DR</h3>
<p>Managing data in structures and easily manipulating the data.</p>
<h2 id="basic-structures">Basic Structures</h2>
<h3 id="dataframe">DataFrame</h3>
<p>It&rsquo;s like a table in RDB.</p>
<ul>
<li>Columns are attributes</li>
<li>Rows are the actual data</li>
<li>Indices are the labels for each row</li>
</ul>
<p>This is the most common object when dealing with data and using <em>pandas</em>. The data in the object is heterogeneous, the shape and the size are mutable. The last part means that the models you build in one object that contains data can easily(ish) be transformed into another model(by model I mean the way your data is structured- names and count of columns(attributes), indexing of the rows, type of the data inside). <br /> <br /> The basic construction of the DataFrame object is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>pandas<span style="color:#f92672">.</span>DataFrame( data, index, columns, dtype, copy)
</span></span></code></pre></div><ul>
<li><code>data</code> - ndarray, series, map, lists, dict, constants..etc. The raw data that will be stored in the DataFame. This could be for example a list of lists. In this case, the &lsquo;inner&rsquo; lists will become the columns and the column names will be given through <strong>columns</strong>. The number of the columns must be the same as the number of inner lists</li>
<li><code>index</code> - the &rsquo;names&rsquo; of the rows. Usually just an index (0,1,2,3&hellip;.). The size of this must be the count of the entries in the dataset</li>
<li><code>columns</code> - the names of the columns</li>
<li>&hellip; - the other ones are none of our concern</li>
</ul>
<p>Some of the constructions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> panda <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> [[<span style="color:#e6db74">&#39;Alex&#39;</span>,<span style="color:#ae81ff">10</span>],[<span style="color:#e6db74">&#39;Bob&#39;</span>,<span style="color:#ae81ff">12</span>],[<span style="color:#e6db74">&#39;Clarke&#39;</span>,<span style="color:#ae81ff">13</span>]]
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(
</span></span><span style="display:flex;"><span>    data,
</span></span><span style="display:flex;"><span>    columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;Name&#39;</span>,<span style="color:#e6db74">&#39;Age&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(
</span></span><span style="display:flex;"><span>    np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">3</span>),
</span></span><span style="display:flex;"><span>    columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;col1&#39;</span>,<span style="color:#e6db74">&#39;col2&#39;</span>,<span style="color:#e6db74">&#39;col3&#39;</span>]
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;Name&#39;</span>:[<span style="color:#e6db74">&#39;Tom&#39;</span>, <span style="color:#e6db74">&#39;Jack&#39;</span>, <span style="color:#e6db74">&#39;Steve&#39;</span>, <span style="color:#e6db74">&#39;Ricky&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;Age&#39;</span>:[<span style="color:#ae81ff">28</span>,<span style="color:#ae81ff">34</span>,<span style="color:#ae81ff">29</span>,<span style="color:#ae81ff">42</span>]
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(data)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;Name&#39;</span>:[<span style="color:#e6db74">&#39;Tom&#39;</span>, <span style="color:#e6db74">&#39;Jack&#39;</span>, <span style="color:#e6db74">&#39;Steve&#39;</span>, <span style="color:#e6db74">&#39;Ricky&#39;</span>],<span style="color:#e6db74">&#39;Age&#39;</span>:[<span style="color:#ae81ff">28</span>,<span style="color:#ae81ff">34</span>,<span style="color:#ae81ff">29</span>,<span style="color:#ae81ff">42</span>]}
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(data, index<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;rank1&#39;</span>,<span style="color:#e6db74">&#39;rank2&#39;</span>,<span style="color:#e6db74">&#39;rank3&#39;</span>,<span style="color:#e6db74">&#39;rank4&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>d <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;one&#39;</span> : pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>], index<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>]),
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#39;two&#39;</span> : pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>], index<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#e6db74">&#39;d&#39;</span>])}
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(d)
</span></span></code></pre></div><p>All of the constructions are pretty intuitive and easy to understand. The thing to remember - all of the possible way that you can construct <em>DataFrame</em>. <br /> <br /> The column selections is just as easy:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;column_name&#39;</span>] <span style="color:#75715e"># return an Series containing the data in the respective column</span>
</span></span></code></pre></div><p>Adding of columns is possible:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span> <span style="color:#75715e">#Adding a new column by passing as Series</span>
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;new&#39;</span>]<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">20</span>,<span style="color:#ae81ff">30</span>],index<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;a&#39;</span>,<span style="color:#e6db74">&#39;b&#39;</span>,<span style="color:#e6db74">&#39;c&#39;</span>])
</span></span><span style="display:flex;"><span>print df
</span></span></code></pre></div><p>as well as deletion:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">del</span> df[<span style="color:#e6db74">&#39;important&#39;</span>]
</span></span></code></pre></div><p>Selection of rows either by index or by lable (the thing that was in the <strong>index</strong> attribute in the constructor)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">&#39;b&#39;</span>]  <span style="color:#75715e"># by lable</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">2</span>]   <span style="color:#75715e"># by index</span>
</span></span><span style="display:flex;"><span>df[<span style="color:#ae81ff">2</span>:<span style="color:#ae81ff">4</span>]      <span style="color:#75715e"># splicing</span>
</span></span></code></pre></div><p>Appending rows to an existing <em>DataFrame</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame([[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>]], columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;a&#39;</span>,<span style="color:#e6db74">&#39;b&#39;</span>])
</span></span><span style="display:flex;"><span>df2 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame([[<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>], [<span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>]], columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;a&#39;</span>,<span style="color:#e6db74">&#39;b&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>append(df2)
</span></span></code></pre></div><h3 id="series">Series</h3>
<p>Series is a one-dimensional labeled array capable of holding data of any type (integer, string, float, python objects, etc.). The axis labels are collectively called index. Construction:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>pandas<span style="color:#f92672">.</span>Series( data, index, dtype, copy)
</span></span></code></pre></div><p>The same thing as the <em>DataFrame</em>! Some examples:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>data <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#e6db74">&#39;a&#39;</span>,<span style="color:#e6db74">&#39;b&#39;</span>,<span style="color:#e6db74">&#39;c&#39;</span>,<span style="color:#e6db74">&#39;d&#39;</span>])
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series(data,index<span style="color:#f92672">=</span>[<span style="color:#ae81ff">100</span>,<span style="color:#ae81ff">101</span>,<span style="color:#ae81ff">102</span>,<span style="color:#ae81ff">103</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;a&#39;</span> : <span style="color:#ae81ff">0.</span>, <span style="color:#e6db74">&#39;b&#39;</span> : <span style="color:#ae81ff">1.</span>, <span style="color:#e6db74">&#39;c&#39;</span> : <span style="color:#ae81ff">2.</span>}
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series(data)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print s[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print s[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print s[<span style="color:#f92672">-</span><span style="color:#ae81ff">3</span>:] <span style="color:#75715e"># the last three elements</span>
</span></span></code></pre></div><h3 id="datapanel">DataPanel</h3>
<p>From what I understand, this is not widely used and I don&rsquo;t think I need it for my project so&hellip; nah. <span class="underline">Skip!!!</span></p>
<h2 id="basic-usage">Basic usage</h2>
<h3 id="dataframe-basic-function">DataFrame basic function</h3>
<p>The most useful functions of the DataFrame-class</p>
<ul>
<li><code>T</code> : Transposes rows and columns.</li>
<li><code>axes</code> : returns a list with the row axis labels and column axis labels as the only members.</li>
<li><code>dtypes</code>: Returns the dtypes in this object.</li>
<li><code>empty</code> : True if NDFrame is entirely empty [no items]; if any of the axes are of length 0.</li>
<li><code>ndim</code> : umber of axes / array dimensions. This is just two</li>
<li><code>shape</code> : Returns a tuple representing the dimensionality of the DataFrame. The first element is the number of rows, the second - the number of attributes</li>
<li><code>size</code> : umber of elements in the NDFrame.</li>
<li><code>values</code>: Numpy representation of NDFrame.</li>
<li><code>head()</code>: Returns the first n rows. Could be used as <code>df.head(n)/df.tail(n)</code> to get the first/last <strong>n</strong> elements.</li>
<li><code>tail()</code>: Returns last n rows.</li>
</ul>
<h3 id="basic-statistics">Basic statistics</h3>
<p>A bunch of simple &lsquo;statistical&rsquo; functions can be applied on the columns of a DataFrame object. Those include:</p>
<ul>
<li><code>count()</code> : Number of non-null observations</li>
<li><code>sum()</code> : Sum of values</li>
<li><code>mean()</code> : Mean of Values</li>
<li><code>median()</code> : Median of Values</li>
<li><code>mode()</code> : Mode of values</li>
<li><code>std()</code> : Standard Deviation of the Values</li>
<li><code>min()</code> : Minimum Value</li>
<li><code>max()</code> : Maximum Value</li>
<li><code>abs()</code> : Absolute Value</li>
<li><code>prod()</code> : Product of Values</li>
<li><code>cumsum()</code> : Cumulative Sum</li>
<li><code>cumprod()</code> : Cumulative Product</li>
</ul>
<p>An example that demonstrates some of these:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Create a Dictionary of series</span>
</span></span><span style="display:flex;"><span>d <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;Name&#39;</span>:pd<span style="color:#f92672">.</span>Series([<span style="color:#e6db74">&#39;Tom&#39;</span>,<span style="color:#e6db74">&#39;James&#39;</span>,<span style="color:#e6db74">&#39;Ricky&#39;</span>,<span style="color:#e6db74">&#39;Vin&#39;</span>,<span style="color:#e6db74">&#39;Steve&#39;</span>,<span style="color:#e6db74">&#39;Smith&#39;</span>,<span style="color:#e6db74">&#39;Jack&#39;</span>,
</span></span><span style="display:flex;"><span>   <span style="color:#e6db74">&#39;Lee&#39;</span>,<span style="color:#e6db74">&#39;David&#39;</span>,<span style="color:#e6db74">&#39;Gasper&#39;</span>,<span style="color:#e6db74">&#39;Betina&#39;</span>,<span style="color:#e6db74">&#39;Andres&#39;</span>]),
</span></span><span style="display:flex;"><span>   <span style="color:#e6db74">&#39;Age&#39;</span>:pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">25</span>,<span style="color:#ae81ff">26</span>,<span style="color:#ae81ff">25</span>,<span style="color:#ae81ff">23</span>,<span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">29</span>,<span style="color:#ae81ff">23</span>,<span style="color:#ae81ff">34</span>,<span style="color:#ae81ff">40</span>,<span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">51</span>,<span style="color:#ae81ff">46</span>]),
</span></span><span style="display:flex;"><span>   <span style="color:#e6db74">&#39;Rating&#39;</span>:pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">4.23</span>,<span style="color:#ae81ff">3.24</span>,<span style="color:#ae81ff">3.98</span>,<span style="color:#ae81ff">2.56</span>,<span style="color:#ae81ff">3.20</span>,<span style="color:#ae81ff">4.6</span>,<span style="color:#ae81ff">3.8</span>,<span style="color:#ae81ff">3.78</span>,<span style="color:#ae81ff">2.98</span>,<span style="color:#ae81ff">4.80</span>,<span style="color:#ae81ff">4.10</span>,<span style="color:#ae81ff">3.65</span>])}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Create a DataFrame</span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(d)
</span></span><span style="display:flex;"><span>print df<span style="color:#f92672">.</span>mean()
</span></span><span style="display:flex;"><span>print df[<span style="color:#e6db74">&#39;Age&#39;</span>]<span style="color:#f92672">.</span>mean()
</span></span><span style="display:flex;"><span>print df[<span style="color:#e6db74">&#39;Age&#39;</span>]<span style="color:#f92672">.</span>min()
</span></span><span style="display:flex;"><span>print df[<span style="color:#e6db74">&#39;Age&#39;</span>]<span style="color:#f92672">.</span>max()
</span></span><span style="display:flex;"><span>print df[<span style="color:#e6db74">&#39;Age&#39;</span>]<span style="color:#f92672">.</span>std()
</span></span></code></pre></div><p>There exists also a <code>describe</code> function that shows summarized information about the data in the <em>DataFrame</em>. This includes <code>mean</code>, <code>std</code> and <strong>IQR</strong> values. The function excludes the textual columns and looks only at the numeric columns. <strong>include</strong> is the argument which is used to pass necessary information regarding what columns need to be considered for summarizing. It can be:</p>
<ul>
<li><code>object</code> − Summarizes String columns</li>
<li><code>number</code> − Summarizes Numeric columns</li>
<li><code>all</code> − Summarizes all columns together</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Create a Dictionary of series</span>
</span></span><span style="display:flex;"><span>d <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;Name&#39;</span>:pd<span style="color:#f92672">.</span>Series([<span style="color:#e6db74">&#39;Tom&#39;</span>,<span style="color:#e6db74">&#39;James&#39;</span>,<span style="color:#e6db74">&#39;Ricky&#39;</span>,<span style="color:#e6db74">&#39;Vin&#39;</span>,<span style="color:#e6db74">&#39;Steve&#39;</span>,<span style="color:#e6db74">&#39;Smith&#39;</span>,<span style="color:#e6db74">&#39;Jack&#39;</span>,
</span></span><span style="display:flex;"><span>   <span style="color:#e6db74">&#39;Lee&#39;</span>,<span style="color:#e6db74">&#39;David&#39;</span>,<span style="color:#e6db74">&#39;Gasper&#39;</span>,<span style="color:#e6db74">&#39;Betina&#39;</span>,<span style="color:#e6db74">&#39;Andres&#39;</span>]),
</span></span><span style="display:flex;"><span>   <span style="color:#e6db74">&#39;Age&#39;</span>:pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">25</span>,<span style="color:#ae81ff">26</span>,<span style="color:#ae81ff">25</span>,<span style="color:#ae81ff">23</span>,<span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">29</span>,<span style="color:#ae81ff">23</span>,<span style="color:#ae81ff">34</span>,<span style="color:#ae81ff">40</span>,<span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">51</span>,<span style="color:#ae81ff">46</span>]),
</span></span><span style="display:flex;"><span>   <span style="color:#e6db74">&#39;Rating&#39;</span>:pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">4.23</span>,<span style="color:#ae81ff">3.24</span>,<span style="color:#ae81ff">3.98</span>,<span style="color:#ae81ff">2.56</span>,<span style="color:#ae81ff">3.20</span>,<span style="color:#ae81ff">4.6</span>,<span style="color:#ae81ff">3.8</span>,<span style="color:#ae81ff">3.78</span>,<span style="color:#ae81ff">2.98</span>,<span style="color:#ae81ff">4.80</span>,<span style="color:#ae81ff">4.10</span>,<span style="color:#ae81ff">3.65</span>])}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Create a DataFrame</span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(d)
</span></span><span style="display:flex;"><span>print df<span style="color:#f92672">.</span>describe()
</span></span></code></pre></div><p>This gives us:</p>
<table>
<thead>
<tr>
<th></th>
<th>Age</th>
<th>Rating</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>12.000000</td>
<td>12.000000</td>
</tr>
<tr>
<td>mean</td>
<td>31.833333</td>
<td>3.743333</td>
</tr>
<tr>
<td>std</td>
<td>9.232682</td>
<td>0.661628</td>
</tr>
<tr>
<td>min</td>
<td>23.000000</td>
<td>2.560000</td>
</tr>
<tr>
<td>25%</td>
<td>25.000000</td>
<td>3.230000</td>
</tr>
<tr>
<td>50%</td>
<td>29.500000</td>
<td>3.790000</td>
</tr>
<tr>
<td>75%</td>
<td>35.500000</td>
<td>4.132500</td>
</tr>
<tr>
<td>max</td>
<td>51.000000</td>
<td>4.800000</td>
</tr>
</tbody>
</table>
<p>OK, kinda. The table is from me and I am kinda showing off.</p>
<h2 id="applying-functions-on-data-in-dataframe">Applying Functions on data in <em>DataFrame</em></h2>
<p>There are a few ways that we can transform a <em>DataFrame</em> into another one by applying a map-like function on the data. Depending on our needs we have the following options:</p>
<ul>
<li><code>pipe()</code> - Table wise Function Application:</li>
<li><code>apply()</code> - Row or Column Wise Function Application</li>
<li><code>applymap()</code> - Element wise Function Application</li>
</ul>
<h3 id="piping">Piping</h3>
<p>From the official documentation:</p>
<blockquote>
<p>Use .pipe when chaining together functions that expect Series, <em>DataFrames</em> or <em>GroupBy</em> objects</p>
</blockquote>
<p>From what I understand - One would use that when applying a bunch of functions on all elements of <em>DataFrame</em> (or whatever) while still having the possibility that the applied function takes more than just one argument. For example, let&rsquo;s add two to every element in <em>DataFrame</em> through an adder function that just adds its two arguments.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">adder</span>(ele1,ele2):
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">return</span> ele1<span style="color:#f92672">+</span>ele2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">3</span>),columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;col1&#39;</span>,<span style="color:#e6db74">&#39;col2&#39;</span>,<span style="color:#e6db74">&#39;col3&#39;</span>])
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>pipe(adder,<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>print(df)
</span></span></code></pre></div><p>We can also do something like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>pipe(foo_fun1, arg1<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>pipe(foo_fun2, arg2<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)<span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>pipe(foo_fun3, arg3<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>)
</span></span></code></pre></div><p>This applies the three functions one after the other while the second argument of those functions is 1, 2 and 3.</p>
<h3 id="applying">Applying</h3>
<p>The <code>apply</code> function of <em>DataFrame</em> applies function on whole columns(or rows). The given function to be applied must take one argument - Series - and return again a Series. Think of it like that - they give you a whole array of numbers, you make something with it and give back a different (or not different) array of the same size. An illustrative example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">3</span>),columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;col1&#39;</span>,<span style="color:#e6db74">&#39;col2&#39;</span>,<span style="color:#e6db74">&#39;col3&#39;</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">return</span> df<span style="color:#f92672">.</span>apply(np<span style="color:#f92672">.</span>mean)
</span></span></code></pre></div><p>Which gives us:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>col1    0.228874
</span></span><span style="display:flex;"><span>col2   -0.561032
</span></span><span style="display:flex;"><span>col3   -0.321606
</span></span><span style="display:flex;"><span>dtype: float64
</span></span></code></pre></div><p>Note how the <strong>np.mean</strong> return a single number so in the final result there is only one row - the mean of each column.</p>
<h3 id="applymap">ApplyMap</h3>
<p>Not all functions can be vectorized (neither the Numpy arrays which return another array nor any value), the methods <code>applymap()</code> on DataFrame and analogously map() on Series accept any Python function taking a single value and returning a single value. This is similar to the <strong>pipe</strong> but it&rsquo;s less flexible. It just treats the whole <em>DataFrame</em> as on a big list and performs a mapping function on it. Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># My custom function</span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">3</span>),columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;col1&#39;</span>,<span style="color:#e6db74">&#39;col2&#39;</span>,<span style="color:#e6db74">&#39;col3&#39;</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">return</span> df<span style="color:#f92672">.</span>applymap(<span style="color:#66d9ef">lambda</span> x:x<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><p>With result:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>col1        col2        col3
</span></span><span style="display:flex;"><span>0  124.741017  -39.997356 -197.724001
</span></span><span style="display:flex;"><span>1  -83.817763   56.487720  -16.127531
</span></span><span style="display:flex;"><span>2  173.797264  187.089676  -38.871016
</span></span><span style="display:flex;"><span>3  -94.927338  -60.133882   15.271702
</span></span><span style="display:flex;"><span>4 -167.875460   83.420648 -179.131762
</span></span></code></pre></div><h2 id="iterating-and-sorting-over-data-in-structures">Iterating and sorting over data in structures</h2>
<h3 id="iterating-dataframe">Iterating <em>DataFrame</em></h3>
<p>Using a <em>DataFrame</em> object in a plane <em>for</em>-loop iterates over the names of the columns.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;A&#39;</span>: [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;x&#39;</span>: [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;y&#39;</span>: [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;C&#39;</span>: [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;D&#39;</span>: [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>]
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> col <span style="color:#f92672">in</span> df:
</span></span><span style="display:flex;"><span>   print(col)
</span></span></code></pre></div><p>This just prints A, B, C,&hellip;,etc.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>A
</span></span><span style="display:flex;"><span>C
</span></span><span style="display:flex;"><span>D
</span></span><span style="display:flex;"><span>x
</span></span><span style="display:flex;"><span>y
</span></span></code></pre></div><p><br /> <br /> Iterating over the date in the <em>DataFrame</em> can be done in several ways:</p>
<ul>
<li><code>iteritems()</code> − to iterate over the (key,value) pairs. Key here again is the &lsquo;index&rsquo;-name-thing that is configurable through the <strong>index</strong> in the constructor.</li>
<li><code>iterrows()</code> − iterate over the rows as (index,series) pairs. Here the index is just a number.</li>
<li><code>itertuples()</code> − iterate over the rows as named tuples</li>
</ul>
<p>The most useful of the above is probably <code>iterrows()</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">3</span>),columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;col1&#39;</span>,<span style="color:#e6db74">&#39;col2&#39;</span>,<span style="color:#e6db74">&#39;col3&#39;</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> row_index,row <span style="color:#f92672">in</span> df<span style="color:#f92672">.</span>iterrows():
</span></span><span style="display:flex;"><span>   print(str(row_index) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">+</span> str(row))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>0
</span></span><span style="display:flex;"><span>col1    2.117955
</span></span><span style="display:flex;"><span>col2   -0.263560
</span></span><span style="display:flex;"><span>col3   -0.600124
</span></span><span style="display:flex;"><span>Name: 0, dtype: float64
</span></span><span style="display:flex;"><span>1
</span></span><span style="display:flex;"><span>col1   -0.620081
</span></span><span style="display:flex;"><span>col2   -1.355647
</span></span><span style="display:flex;"><span>col3   -0.568608
</span></span><span style="display:flex;"><span>Name: 1, dtype: float64
</span></span><span style="display:flex;"><span>2
</span></span><span style="display:flex;"><span>col1    1.792265
</span></span><span style="display:flex;"><span>col2   -0.494137
</span></span><span style="display:flex;"><span>col3   -1.395912
</span></span><span style="display:flex;"><span>Name: 2, dtype: float64
</span></span><span style="display:flex;"><span>3
</span></span><span style="display:flex;"><span>col1   -1.189506
</span></span><span style="display:flex;"><span>col2   -0.479746
</span></span><span style="display:flex;"><span>col3    0.329728
</span></span><span style="display:flex;"><span>Name: 3, dtype: float64
</span></span></code></pre></div><p>To note is that the iterated <em>row</em>-objects contain information for each column so if you want to get the second column of the row:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>row.col2
</span></span></code></pre></div><h3 id="sorting-dataframe">Sorting <em>DataFrame</em></h3>
<p>There are two possibilities for sorting:</p>
<ol>
<li>By lable - i. e. by index</li>
<li>By value of some column</li>
</ol>
<p>The first one is useful when the data is saved out of order. By appropriately creating the index in the construction and then sorting by lable, you can load the data in memory in the right order. <br /> <br /> The two functions are:</p>
<ul>
<li><code>sort_index([ascending=True/False])</code></li>
<li><code>sort_values(by=col_name,[ascending=True/False])</code></li>
</ul>
<p>By default <em>ascending</em> is set to <em>True</em>. Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>unsorted_df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(
</span></span><span style="display:flex;"><span>    np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">2</span>),
</span></span><span style="display:flex;"><span>index<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">7</span>],
</span></span><span style="display:flex;"><span>    columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;col2&#39;</span>,<span style="color:#e6db74">&#39;col1&#39;</span>]
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sorted_index_df <span style="color:#f92672">=</span> unsorted_df<span style="color:#f92672">.</span>sort_index()
</span></span><span style="display:flex;"><span>sorted_val_df <span style="color:#f92672">=</span> unsorted_df<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;col2&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(sorted_index_df)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;-------------&#34;</span>)
</span></span><span style="display:flex;"><span>print(sorted_val_df)
</span></span></code></pre></div><p>Output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>       col2      col1
</span></span><span style="display:flex;"><span>0  0.562948  0.768513
</span></span><span style="display:flex;"><span>1  1.776865 -0.217141
</span></span><span style="display:flex;"><span>2 -0.040029 -2.300772
</span></span><span style="display:flex;"><span>3 -1.695105  0.294038
</span></span><span style="display:flex;"><span>4  0.163922  0.934361
</span></span><span style="display:flex;"><span>5  0.998288 -1.149822
</span></span><span style="display:flex;"><span>6 -0.641102  0.539689
</span></span><span style="display:flex;"><span>7  1.190690  0.027898
</span></span><span style="display:flex;"><span>8  0.745714  0.916117
</span></span><span style="display:flex;"><span>9  0.144558  2.581345
</span></span><span style="display:flex;"><span>-------------
</span></span><span style="display:flex;"><span>       col2      col1
</span></span><span style="display:flex;"><span>3 -1.695105  0.294038
</span></span><span style="display:flex;"><span>6 -0.641102  0.539689
</span></span><span style="display:flex;"><span>2 -0.040029 -2.300772
</span></span><span style="display:flex;"><span>9  0.144558  2.581345
</span></span><span style="display:flex;"><span>4  0.163922  0.934361
</span></span><span style="display:flex;"><span>0  0.562948  0.768513
</span></span><span style="display:flex;"><span>8  0.745714  0.916117
</span></span><span style="display:flex;"><span>5  0.998288 -1.149822
</span></span><span style="display:flex;"><span>7  1.190690  0.027898
</span></span><span style="display:flex;"><span>1  1.776865 -0.217141
</span></span></code></pre></div><h2 id="slicing">Slicing</h2>
<p>There are several custom ways of slicing through data that are optimized and are the recommended way of slicing data when dealing with production code.</p>
<ol>
<li>
<p><strong>loc()</strong> - label based indexing. Used as df.loc[&lt;/rows/&gt;,&lt;/columns/&gt;]. For <em>rows</em> and <em>columns</em> could be given pretty much everything that makes sense - single char, list of labels, slice object, boolean array.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[[<span style="color:#e6db74">&#39;a&#39;</span>,<span style="color:#e6db74">&#39;b&#39;</span>,<span style="color:#e6db74">&#39;f&#39;</span>,<span style="color:#e6db74">&#39;h&#39;</span>],[<span style="color:#e6db74">&#39;A&#39;</span>,<span style="color:#e6db74">&#39;C&#39;</span>]]
</span></span></code></pre></div></li>
<li>
<p><strong>iloc()</strong> - index based indexing. Used the same way as <strong>loc()</strong> but just with integer indices.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">2</span>:<span style="color:#ae81ff">4</span>]
</span></span></code></pre></div></li>
</ol>
<h2 id="tougher-statistics">Tougher statistics</h2>
<h3 id="some-functions">Some functions</h3>
<p>There are some useful statistical functions already in <em>pandas</em> that help with the understanding and analyzing the behavior of data</p>
<ol>
<li>
<p><strong>Percent_change</strong> -This function compares every element with its prior element and computes the change percentage.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">4</span>])
</span></span><span style="display:flex;"><span>print(s<span style="color:#f92672">.</span>pct_change())
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;-----&#34;</span>)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">2</span>))
</span></span><span style="display:flex;"><span>print(df<span style="color:#f92672">.</span>pct_change())
</span></span></code></pre></div></li>
</ol>
<p>Gives us:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>0         NaN
</span></span><span style="display:flex;"><span>1    1.000000
</span></span><span style="display:flex;"><span>2    0.500000
</span></span><span style="display:flex;"><span>3    0.333333
</span></span><span style="display:flex;"><span>4    0.250000
</span></span><span style="display:flex;"><span>5   -0.200000
</span></span><span style="display:flex;"><span>dtype: float64
</span></span><span style="display:flex;"><span>-----
</span></span><span style="display:flex;"><span>          0          1
</span></span><span style="display:flex;"><span>0       NaN        NaN
</span></span><span style="display:flex;"><span>1 -1.156977 -16.169034
</span></span><span style="display:flex;"><span>2  0.234270  -0.647137
</span></span><span style="display:flex;"><span>3 -3.203838  -1.043420
</span></span><span style="display:flex;"><span>4 -1.548769  -9.686350
</span></span></code></pre></div><p>The first row is <em>NaN</em> because there is no previous element to compare it to.</p>
<ol>
<li><strong>Covariance</strong> - the <em>Series</em> object has a method <strong>cov</strong> to compute covariance between two objects.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>s1 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">10</span>))
</span></span><span style="display:flex;"><span>s2 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">10</span>))
</span></span><span style="display:flex;"><span>print(s1<span style="color:#f92672">.</span>cov(s2))
</span></span></code></pre></div><p>Output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>-0.23077206068332465
</span></span></code></pre></div><p><em>NaN</em> values are ignored automatically.</p>
<ol>
<li><strong>Correlation</strong> - the natural follow up of course.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>frame <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">5</span>), columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#e6db74">&#39;d&#39;</span>, <span style="color:#e6db74">&#39;e&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print( frame[<span style="color:#e6db74">&#39;a&#39;</span>]<span style="color:#f92672">.</span>corr(frame[<span style="color:#e6db74">&#39;b&#39;</span>]))
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;-------&#34;</span>)
</span></span><span style="display:flex;"><span>print( frame<span style="color:#f92672">.</span>corr())
</span></span></code></pre></div><p>The latter table shows in each cell shows what is the correlation between the respective columns.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>0.584632830437208
</span></span><span style="display:flex;"><span>-------
</span></span><span style="display:flex;"><span>          a         b         c         d         e
</span></span><span style="display:flex;"><span>a  1.000000  0.584633  0.178898 -0.199928 -0.073022
</span></span><span style="display:flex;"><span>b  0.584633  1.000000  0.045907  0.111284  0.006680
</span></span><span style="display:flex;"><span>c  0.178898  0.045907  1.000000 -0.455127  0.065576
</span></span><span style="display:flex;"><span>d -0.199928  0.111284 -0.455127  1.000000 -0.596656
</span></span><span style="display:flex;"><span>e -0.073022  0.006680  0.065576 -0.596656  1.000000
</span></span></code></pre></div><h3 id="window-statistics">Window statistics</h3>
<p>Some of the supported operations are:</p>
<ol>
<li>Rolling - Imagine a window that rolls over the data and computes &lsquo;something&rsquo; with the elements that are currently in the window. Usueall the restult is written then in the first element of the wondow. The function in use here is <strong>rolling(windows=/window_size/)</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(
</span></span><span style="display:flex;"><span>    np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">4</span>),
</span></span><span style="display:flex;"><span>    index <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;1/1/2000&#39;</span>, periods<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>    columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;A&#39;</span>, <span style="color:#e6db74">&#39;B&#39;</span>, <span style="color:#e6db74">&#39;C&#39;</span>, <span style="color:#e6db74">&#39;D&#39;</span>]
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>print(df<span style="color:#f92672">.</span>rolling(window<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>)<span style="color:#f92672">.</span>mean())
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>                   A         B         C         D
</span></span><span style="display:flex;"><span>2000-01-01       NaN       NaN       NaN       NaN
</span></span><span style="display:flex;"><span>2000-01-02       NaN       NaN       NaN       NaN
</span></span><span style="display:flex;"><span>2000-01-03  0.448896 -0.457281 -0.320112 -0.629398
</span></span><span style="display:flex;"><span>2000-01-04  0.142268 -0.523835 -0.627615  0.228978
</span></span><span style="display:flex;"><span>2000-01-05 -0.200259 -1.242848 -0.683303 -0.575579
</span></span><span style="display:flex;"><span>2000-01-06 -0.867429 -0.211049 -0.207560  0.048380
</span></span><span style="display:flex;"><span>2000-01-07 -1.117081 -0.268690  0.053126 -0.376906
</span></span><span style="display:flex;"><span>2000-01-08 -1.117306  0.142617 -0.295222 -0.505522
</span></span><span style="display:flex;"><span>2000-01-09 -0.324298 -0.065450 -0.333431 -1.186115
</span></span><span style="display:flex;"><span>2000-01-10 -0.186834 -0.131418 -0.530804 -0.624335
</span></span></code></pre></div><p>The window is big 3-elements and therefore the first two rows don&rsquo;t have the needed neighbors.</p>
<ol>
<li>
<p>Expanding - Calculate something for the first element, then for the first and second together, then for the first, second and third together and so forth. This is done with <strong>expanding(min_periods=n)</strong>. <em>min_periods</em> shows when the computations begin (the number of rows needed in order the generated row not to be <em>NaN</em>).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">4</span>),
</span></span><span style="display:flex;"><span>                  index <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;1/1/2000&#39;</span>, periods<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>                  columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;A&#39;</span>, <span style="color:#e6db74">&#39;B&#39;</span>, <span style="color:#e6db74">&#39;C&#39;</span>, <span style="color:#e6db74">&#39;D&#39;</span>])
</span></span><span style="display:flex;"><span>print(df<span style="color:#f92672">.</span>expanding(min_periods<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>)<span style="color:#f92672">.</span>mean())
</span></span></code></pre></div></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>                   A         B         C         D
</span></span><span style="display:flex;"><span>2000-01-01       NaN       NaN       NaN       NaN
</span></span><span style="display:flex;"><span>2000-01-02       NaN       NaN       NaN       NaN
</span></span><span style="display:flex;"><span>2000-01-03  1.330880 -0.758586  0.172522  0.657721
</span></span><span style="display:flex;"><span>2000-01-04  1.161148 -0.147130 -0.110188  0.473314
</span></span><span style="display:flex;"><span>2000-01-05  0.565535  0.120415 -0.038158  0.647995
</span></span><span style="display:flex;"><span>2000-01-06  0.721102  0.268228 -0.037819  0.563833
</span></span><span style="display:flex;"><span>2000-01-07  0.734176  0.232185 -0.090012  0.420967
</span></span><span style="display:flex;"><span>2000-01-08  0.681839  0.240921 -0.204159  0.223472
</span></span><span style="display:flex;"><span>2000-01-09  0.772570  0.121897  0.053970  0.105342
</span></span><span style="display:flex;"><span>2000-01-10  0.837397  0.266325  0.109070  0.280632
</span></span></code></pre></div><ol>
<li>
<p>Exponentially moving weights - Not sure for the exact mathematics of this one, but&hellip;it averages the data in some weird way. It&rsquo;s used to get the &lsquo;general idea&rsquo; for the behaiviour of the data</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">4</span>),
</span></span><span style="display:flex;"><span>                  index <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;1/1/2000&#39;</span>, periods<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>                  columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;A&#39;</span>, <span style="color:#e6db74">&#39;B&#39;</span>, <span style="color:#e6db74">&#39;C&#39;</span>, <span style="color:#e6db74">&#39;D&#39;</span>])
</span></span><span style="display:flex;"><span>print( df<span style="color:#f92672">.</span>ewm(com<span style="color:#f92672">=</span><span style="color:#ae81ff">0.5</span>)<span style="color:#f92672">.</span>mean())
</span></span></code></pre></div></li>
</ol>
<h3 id="grouping-and-aggregating">Grouping and Aggregating</h3>
<p>In many situations the following &lsquo;pipeline&rsquo; occurs:</p>
<ol>
<li>Split and object by grouping it entries by some key</li>
<li>Perform some operations to get a single number for each group</li>
<li>Combine the result into a new object</li>
</ol>
<p>The second step could have some variations. Maybe we can want to transform or filter the data but the general idea stays. Pandas offers some great functions to achieve all of this. <br /> <br /> Firstly, in order to create the groups we can use the <strong>groupby()</strong> function. It can take the name of single column or multiple ones. In the latter case, the appropriate combinations between the keys of the columns are generated. Each combinations is it&rsquo;s own group. Once the grouping object is created, the groups can be examined with <code>gr.groups</code>. The groups can also be easly iterated over. Selecting a group is also easy by specifying its key. <br /> <br /> Summarizing example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span>ipl_data <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;Team&#39;</span>: [<span style="color:#e6db74">&#39;Riders&#39;</span>, <span style="color:#e6db74">&#39;Riders&#39;</span>, <span style="color:#e6db74">&#39;Devils&#39;</span>, <span style="color:#e6db74">&#39;Devils&#39;</span>, <span style="color:#e6db74">&#39;Kings&#39;</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#39;kings&#39;</span>, <span style="color:#e6db74">&#39;Kings&#39;</span>, <span style="color:#e6db74">&#39;Kings&#39;</span>, <span style="color:#e6db74">&#39;Riders&#39;</span>, <span style="color:#e6db74">&#39;Royals&#39;</span>, <span style="color:#e6db74">&#39;Royals&#39;</span>, <span style="color:#e6db74">&#39;Riders&#39;</span>],
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#39;Rank&#39;</span>: [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span> ,<span style="color:#ae81ff">1</span> ,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span> , <span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>],
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#39;Year&#39;</span>: [<span style="color:#ae81ff">2014</span>,<span style="color:#ae81ff">2015</span>,<span style="color:#ae81ff">2014</span>,<span style="color:#ae81ff">2015</span>,<span style="color:#ae81ff">2014</span>,<span style="color:#ae81ff">2015</span>,<span style="color:#ae81ff">2016</span>,<span style="color:#ae81ff">2017</span>,<span style="color:#ae81ff">2016</span>,<span style="color:#ae81ff">2014</span>,<span style="color:#ae81ff">2015</span>,<span style="color:#ae81ff">2017</span>],
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#39;Points&#39;</span>:[<span style="color:#ae81ff">876</span>,<span style="color:#ae81ff">789</span>,<span style="color:#ae81ff">863</span>,<span style="color:#ae81ff">673</span>,<span style="color:#ae81ff">741</span>,<span style="color:#ae81ff">812</span>,<span style="color:#ae81ff">756</span>,<span style="color:#ae81ff">788</span>,<span style="color:#ae81ff">694</span>,<span style="color:#ae81ff">701</span>,<span style="color:#ae81ff">804</span>,<span style="color:#ae81ff">690</span>]}
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(ipl_data)
</span></span><span style="display:flex;"><span>gr <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;Team&#39;</span>,<span style="color:#e6db74">&#39;Year&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(gr<span style="color:#f92672">.</span>groups)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;------&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> name,group <span style="color:#f92672">in</span> gr:
</span></span><span style="display:flex;"><span>    print(name)
</span></span><span style="display:flex;"><span>    print(group)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;-----&#34;</span>)
</span></span><span style="display:flex;"><span>print(gr<span style="color:#f92672">.</span>get_group((<span style="color:#e6db74">&#39;Riders&#39;</span>, <span style="color:#ae81ff">2014</span>)))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>{(&#39;Devils&#39;, 2014): Int64Index([2], dtype=&#39;int64&#39;), (&#39;Devils&#39;, 2015): Int64Index([3], dtype=&#39;int64&#39;), (&#39;Kings&#39;, 2014): Int64Index([4], dtype=&#39;int64&#39;), (&#39;Kings&#39;, 2016): Int64Index([6], dtype=&#39;int64&#39;), (&#39;Kings&#39;, 2017): Int64Index([7], dtype=&#39;int64&#39;), (&#39;Riders&#39;, 2014): Int64Index([0], dtype=&#39;int64&#39;), (&#39;Riders&#39;, 2015): Int64Index([1], dtype=&#39;int64&#39;), (&#39;Riders&#39;, 2016): Int64Index([8], dtype=&#39;int64&#39;), (&#39;Riders&#39;, 2017): Int64Index([11], dtype=&#39;int64&#39;), (&#39;Royals&#39;, 2014): Int64Index([9], dtype=&#39;int64&#39;), (&#39;Royals&#39;, 2015): Int64Index([10], dtype=&#39;int64&#39;), (&#39;kings&#39;, 2015): Int64Index([5], dtype=&#39;int64&#39;)}
</span></span><span style="display:flex;"><span>------
</span></span><span style="display:flex;"><span>(&#39;Devils&#39;, 2014)
</span></span><span style="display:flex;"><span>   Points  Rank    Team  Year
</span></span><span style="display:flex;"><span>2     863     2  Devils  2014
</span></span><span style="display:flex;"><span>(&#39;Devils&#39;, 2015)
</span></span><span style="display:flex;"><span>   Points  Rank    Team  Year
</span></span><span style="display:flex;"><span>3     673     3  Devils  2015
</span></span><span style="display:flex;"><span>(&#39;Kings&#39;, 2014)
</span></span><span style="display:flex;"><span>   Points  Rank   Team  Year
</span></span><span style="display:flex;"><span>4     741     3  Kings  2014
</span></span><span style="display:flex;"><span>(&#39;Kings&#39;, 2016)
</span></span><span style="display:flex;"><span>   Points  Rank   Team  Year
</span></span><span style="display:flex;"><span>6     756     1  Kings  2016
</span></span><span style="display:flex;"><span>(&#39;Kings&#39;, 2017)
</span></span><span style="display:flex;"><span>   Points  Rank   Team  Year
</span></span><span style="display:flex;"><span>7     788     1  Kings  2017
</span></span><span style="display:flex;"><span>(&#39;Riders&#39;, 2014)
</span></span><span style="display:flex;"><span>   Points  Rank    Team  Year
</span></span><span style="display:flex;"><span>0     876     1  Riders  2014
</span></span><span style="display:flex;"><span>(&#39;Riders&#39;, 2015)
</span></span><span style="display:flex;"><span>   Points  Rank    Team  Year
</span></span><span style="display:flex;"><span>1     789     2  Riders  2015
</span></span><span style="display:flex;"><span>(&#39;Riders&#39;, 2016)
</span></span><span style="display:flex;"><span>   Points  Rank    Team  Year
</span></span><span style="display:flex;"><span>8     694     2  Riders  2016
</span></span><span style="display:flex;"><span>(&#39;Riders&#39;, 2017)
</span></span><span style="display:flex;"><span>    Points  Rank    Team  Year
</span></span><span style="display:flex;"><span>11     690     2  Riders  2017
</span></span><span style="display:flex;"><span>(&#39;Royals&#39;, 2014)
</span></span><span style="display:flex;"><span>   Points  Rank    Team  Year
</span></span><span style="display:flex;"><span>9     701     4  Royals  2014
</span></span><span style="display:flex;"><span>(&#39;Royals&#39;, 2015)
</span></span><span style="display:flex;"><span>    Points  Rank    Team  Year
</span></span><span style="display:flex;"><span>10     804     1  Royals  2015
</span></span><span style="display:flex;"><span>(&#39;kings&#39;, 2015)
</span></span><span style="display:flex;"><span>   Points  Rank   Team  Year
</span></span><span style="display:flex;"><span>5     812     4  kings  2015
</span></span><span style="display:flex;"><span>-----
</span></span><span style="display:flex;"><span>   Points  Rank    Team  Year
</span></span><span style="display:flex;"><span>0     876     1  Riders  2014
</span></span></code></pre></div><p>Now comes the fun part. The <strong>agg()</strong> function returns a single aggregated value for each group. It takes a function on its own that does the actual work. Many of the <em>numpy</em> functions are supported. Multiple aggregations per <strong>agg()</strong> call are also possible. To note is that <strong>agg()</strong> is usually applied to single column</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ipl_data <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;Team&#39;</span>: [<span style="color:#e6db74">&#39;Riders&#39;</span>, <span style="color:#e6db74">&#39;Riders&#39;</span>, <span style="color:#e6db74">&#39;Devils&#39;</span>, <span style="color:#e6db74">&#39;Devils&#39;</span>, <span style="color:#e6db74">&#39;Kings&#39;</span>,
</span></span><span style="display:flex;"><span>                     <span style="color:#e6db74">&#39;kings&#39;</span>, <span style="color:#e6db74">&#39;Kings&#39;</span>, <span style="color:#e6db74">&#39;Kings&#39;</span>, <span style="color:#e6db74">&#39;Riders&#39;</span>, <span style="color:#e6db74">&#39;Royals&#39;</span>, <span style="color:#e6db74">&#39;Royals&#39;</span>, <span style="color:#e6db74">&#39;Riders&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;Rank&#39;</span>: [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span> ,<span style="color:#ae81ff">1</span> ,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span> , <span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;Year&#39;</span>: [<span style="color:#ae81ff">2014</span>,<span style="color:#ae81ff">2015</span>,<span style="color:#ae81ff">2014</span>,<span style="color:#ae81ff">2015</span>,<span style="color:#ae81ff">2014</span>,<span style="color:#ae81ff">2015</span>,<span style="color:#ae81ff">2016</span>,<span style="color:#ae81ff">2017</span>,<span style="color:#ae81ff">2016</span>,<span style="color:#ae81ff">2014</span>,<span style="color:#ae81ff">2015</span>,<span style="color:#ae81ff">2017</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;Points&#39;</span>:[<span style="color:#ae81ff">876</span>,<span style="color:#ae81ff">789</span>,<span style="color:#ae81ff">863</span>,<span style="color:#ae81ff">673</span>,<span style="color:#ae81ff">741</span>,<span style="color:#ae81ff">812</span>,<span style="color:#ae81ff">756</span>,<span style="color:#ae81ff">788</span>,<span style="color:#ae81ff">694</span>,<span style="color:#ae81ff">701</span>,<span style="color:#ae81ff">804</span>,<span style="color:#ae81ff">690</span>]}
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(ipl_data)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>grouped <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;Year&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(grouped[<span style="color:#e6db74">&#39;Points&#39;</span>]<span style="color:#f92672">.</span>agg(np<span style="color:#f92672">.</span>mean))
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;----&#34;</span>)
</span></span><span style="display:flex;"><span>print(grouped[<span style="color:#e6db74">&#39;Points&#39;</span>]<span style="color:#f92672">.</span>agg([np<span style="color:#f92672">.</span>sum, np<span style="color:#f92672">.</span>mean, np<span style="color:#f92672">.</span>std]))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Year
</span></span><span style="display:flex;"><span>2014    795.25
</span></span><span style="display:flex;"><span>2015    769.50
</span></span><span style="display:flex;"><span>2016    725.00
</span></span><span style="display:flex;"><span>2017    739.00
</span></span><span style="display:flex;"><span>Name: Points, dtype: float64
</span></span><span style="display:flex;"><span>----
</span></span><span style="display:flex;"><span>       sum    mean        std
</span></span><span style="display:flex;"><span>Year
</span></span><span style="display:flex;"><span>2014  3181  795.25  87.439026
</span></span><span style="display:flex;"><span>2015  3078  769.50  65.035888
</span></span><span style="display:flex;"><span>2016  1450  725.00  43.840620
</span></span><span style="display:flex;"><span>2017  1478  739.00  69.296465
</span></span></code></pre></div><p>Groups can be filtered with the <strong>filter()</strong> function.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>ipl_data <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;Team&#39;</span>: [<span style="color:#e6db74">&#39;Riders&#39;</span>, <span style="color:#e6db74">&#39;Riders&#39;</span>, <span style="color:#e6db74">&#39;Devils&#39;</span>, <span style="color:#e6db74">&#39;Devils&#39;</span>, <span style="color:#e6db74">&#39;Kings&#39;</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#39;kings&#39;</span>, <span style="color:#e6db74">&#39;Kings&#39;</span>, <span style="color:#e6db74">&#39;Kings&#39;</span>, <span style="color:#e6db74">&#39;Riders&#39;</span>, <span style="color:#e6db74">&#39;Royals&#39;</span>, <span style="color:#e6db74">&#39;Royals&#39;</span>, <span style="color:#e6db74">&#39;Riders&#39;</span>],
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#39;Rank&#39;</span>: [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span> ,<span style="color:#ae81ff">1</span> ,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span> , <span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>],
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#39;Year&#39;</span>: [<span style="color:#ae81ff">2014</span>,<span style="color:#ae81ff">2015</span>,<span style="color:#ae81ff">2014</span>,<span style="color:#ae81ff">2015</span>,<span style="color:#ae81ff">2014</span>,<span style="color:#ae81ff">2015</span>,<span style="color:#ae81ff">2016</span>,<span style="color:#ae81ff">2017</span>,<span style="color:#ae81ff">2016</span>,<span style="color:#ae81ff">2014</span>,<span style="color:#ae81ff">2015</span>,<span style="color:#ae81ff">2017</span>],
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#39;Points&#39;</span>:[<span style="color:#ae81ff">876</span>,<span style="color:#ae81ff">789</span>,<span style="color:#ae81ff">863</span>,<span style="color:#ae81ff">673</span>,<span style="color:#ae81ff">741</span>,<span style="color:#ae81ff">812</span>,<span style="color:#ae81ff">756</span>,<span style="color:#ae81ff">788</span>,<span style="color:#ae81ff">694</span>,<span style="color:#ae81ff">701</span>,<span style="color:#ae81ff">804</span>,<span style="color:#ae81ff">690</span>]}
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(ipl_data)
</span></span><span style="display:flex;"><span>print(df<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;Team&#39;</span>)<span style="color:#f92672">.</span>filter(<span style="color:#66d9ef">lambda</span> x: len(x) <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">3</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>    Points  Rank    Team  Year
</span></span><span style="display:flex;"><span>0      876     1  Riders  2014
</span></span><span style="display:flex;"><span>1      789     2  Riders  2015
</span></span><span style="display:flex;"><span>4      741     3   Kings  2014
</span></span><span style="display:flex;"><span>6      756     1   Kings  2016
</span></span><span style="display:flex;"><span>7      788     1   Kings  2017
</span></span><span style="display:flex;"><span>8      694     2  Riders  2016
</span></span><span style="display:flex;"><span>11     690     2  Riders  2017
</span></span></code></pre></div><h2 id="concatenating">Concatenating</h2>
<p>When working with a little bin more complex data like in <em>pandas</em> the concatenation can become a tricky thing. <em>pandas</em> offers a special function:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pd.concat(objs,axis=0,join=&#39;outer&#39;,join_axes=None,ignore_index=False)
</span></span></code></pre></div><p>The <em>axis</em> parameter controls how the concatenation is done - either by columns or by rows (row default).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span>one <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;Name&#39;</span>: [<span style="color:#e6db74">&#39;Alex&#39;</span>, <span style="color:#e6db74">&#39;Amy&#39;</span>, <span style="color:#e6db74">&#39;Allen&#39;</span>, <span style="color:#e6db74">&#39;Alice&#39;</span>, <span style="color:#e6db74">&#39;Ayoung&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;subject_id&#39;</span>:[<span style="color:#e6db74">&#39;sub1&#39;</span>,<span style="color:#e6db74">&#39;sub2&#39;</span>,<span style="color:#e6db74">&#39;sub4&#39;</span>,<span style="color:#e6db74">&#39;sub6&#39;</span>,<span style="color:#e6db74">&#39;sub5&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;Marks_scored&#39;</span>:[<span style="color:#ae81ff">98</span>,<span style="color:#ae81ff">90</span>,<span style="color:#ae81ff">87</span>,<span style="color:#ae81ff">69</span>,<span style="color:#ae81ff">78</span>]},
</span></span><span style="display:flex;"><span>                   index<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>])
</span></span><span style="display:flex;"><span>two <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;Name&#39;</span>: [<span style="color:#e6db74">&#39;Billy&#39;</span>, <span style="color:#e6db74">&#39;Brian&#39;</span>, <span style="color:#e6db74">&#39;Bran&#39;</span>, <span style="color:#e6db74">&#39;Bryce&#39;</span>, <span style="color:#e6db74">&#39;Betty&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;subject_id&#39;</span>:[<span style="color:#e6db74">&#39;sub2&#39;</span>,<span style="color:#e6db74">&#39;sub4&#39;</span>,<span style="color:#e6db74">&#39;sub3&#39;</span>,<span style="color:#e6db74">&#39;sub6&#39;</span>,<span style="color:#e6db74">&#39;sub5&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;Marks_scored&#39;</span>:[<span style="color:#ae81ff">89</span>,<span style="color:#ae81ff">80</span>,<span style="color:#ae81ff">79</span>,<span style="color:#ae81ff">97</span>,<span style="color:#ae81ff">88</span>]},
</span></span><span style="display:flex;"><span>                   index<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>])
</span></span><span style="display:flex;"><span>print(pd<span style="color:#f92672">.</span>concat([one,two]))
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;-------&#34;</span>)
</span></span><span style="display:flex;"><span>print(pd<span style="color:#f92672">.</span>concat([one,two],axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>))
</span></span></code></pre></div><ul>
<li>
<p>by row</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>  Marks_scored    Name subject_id
</span></span><span style="display:flex;"><span>1            98    Alex       sub1
</span></span><span style="display:flex;"><span>2            90     Amy       sub2
</span></span><span style="display:flex;"><span>3            87   Allen       sub4
</span></span><span style="display:flex;"><span>4            69   Alice       sub6
</span></span><span style="display:flex;"><span>5            78  Ayoung       sub5
</span></span><span style="display:flex;"><span>1            89   Billy       sub2
</span></span><span style="display:flex;"><span>2            80   Brian       sub4
</span></span><span style="display:flex;"><span>3            79    Bran       sub3
</span></span><span style="display:flex;"><span>4            97   Bryce       sub6
</span></span><span style="display:flex;"><span>5            88   Betty       sub5
</span></span></code></pre></div></li>
<li>
<p>by column</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>  Marks_scored    Name subject_id  Marks_scored   Name subject_id
</span></span><span style="display:flex;"><span>1            98    Alex       sub1            89  Billy       sub2
</span></span><span style="display:flex;"><span>2            90     Amy       sub2            80  Brian       sub4
</span></span><span style="display:flex;"><span>3            87   Allen       sub4            79   Bran       sub3
</span></span><span style="display:flex;"><span>4            69   Alice       sub6            97  Bryce       sub6
</span></span><span style="display:flex;"><span>5            78  Ayoung       sub5            88  Betty       sub5
</span></span></code></pre></div></li>
</ul>
<p>By concatenation new labels can be assigned to the different parts:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span>one <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;Name&#39;</span>: [<span style="color:#e6db74">&#39;Alex&#39;</span>, <span style="color:#e6db74">&#39;Amy&#39;</span>, <span style="color:#e6db74">&#39;Allen&#39;</span>, <span style="color:#e6db74">&#39;Alice&#39;</span>, <span style="color:#e6db74">&#39;Ayoung&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;subject_id&#39;</span>:[<span style="color:#e6db74">&#39;sub1&#39;</span>,<span style="color:#e6db74">&#39;sub2&#39;</span>,<span style="color:#e6db74">&#39;sub4&#39;</span>,<span style="color:#e6db74">&#39;sub6&#39;</span>,<span style="color:#e6db74">&#39;sub5&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;Marks_scored&#39;</span>:[<span style="color:#ae81ff">98</span>,<span style="color:#ae81ff">90</span>,<span style="color:#ae81ff">87</span>,<span style="color:#ae81ff">69</span>,<span style="color:#ae81ff">78</span>]},
</span></span><span style="display:flex;"><span>                   index<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>])
</span></span><span style="display:flex;"><span>two <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;Name&#39;</span>: [<span style="color:#e6db74">&#39;Billy&#39;</span>, <span style="color:#e6db74">&#39;Brian&#39;</span>, <span style="color:#e6db74">&#39;Bran&#39;</span>, <span style="color:#e6db74">&#39;Bryce&#39;</span>, <span style="color:#e6db74">&#39;Betty&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;subject_id&#39;</span>:[<span style="color:#e6db74">&#39;sub2&#39;</span>,<span style="color:#e6db74">&#39;sub4&#39;</span>,<span style="color:#e6db74">&#39;sub3&#39;</span>,<span style="color:#e6db74">&#39;sub6&#39;</span>,<span style="color:#e6db74">&#39;sub5&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;Marks_scored&#39;</span>:[<span style="color:#ae81ff">89</span>,<span style="color:#ae81ff">80</span>,<span style="color:#ae81ff">79</span>,<span style="color:#ae81ff">97</span>,<span style="color:#ae81ff">88</span>]},
</span></span><span style="display:flex;"><span>                   index<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>])
</span></span><span style="display:flex;"><span>print(pd<span style="color:#f92672">.</span>concat([one,two],keys<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;x&#39;</span>,<span style="color:#e6db74">&#39;y&#39;</span>],ignore_index<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>     Marks_scored    Name subject_id
</span></span><span style="display:flex;"><span>x 1            98    Alex       sub1
</span></span><span style="display:flex;"><span>  2            90     Amy       sub2
</span></span><span style="display:flex;"><span>  3            87   Allen       sub4
</span></span><span style="display:flex;"><span>  4            69   Alice       sub6
</span></span><span style="display:flex;"><span>  5            78  Ayoung       sub5
</span></span><span style="display:flex;"><span>y 1            89   Billy       sub2
</span></span><span style="display:flex;"><span>  2            80   Brian       sub4
</span></span><span style="display:flex;"><span>  3            79    Bran       sub3
</span></span><span style="display:flex;"><span>  4            97   Bryce       sub6
</span></span><span style="display:flex;"><span>  5            88   Betty       sub5
</span></span></code></pre></div><p>Later those new keys can be used in order to distinguish from which set the row came from. <br /> <br /> Appending is also possible and it takes the simple form:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>one<span style="color:#f92672">.</span>append(two)
</span></span></code></pre></div><h2 id="categories">Categories</h2>
<p>A lot of times some string-fields in the data aren&rsquo;t just some random text but a repetitive and an element of some predefined set of possible values. Those are the categorical types of data. Something like [big, medium, small]. Categorical variables can take on only a limited, and usually fixed number of possible values. Besides the fixed length, categorical data might have an order but cannot perform the numerical operation. Categorical is a <em>Pandas</em> data type. <br /> <br /> A simple example to create a <em>Series</em> object that only can contain [a, b, c]</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series([<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;b&#34;</span>,<span style="color:#e6db74">&#34;c&#34;</span>,<span style="color:#e6db74">&#34;a&#34;</span>], dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;category&#34;</span>)
</span></span><span style="display:flex;"><span>print(s)
</span></span></code></pre></div><p>This gives us:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>0    a
</span></span><span style="display:flex;"><span>1    b
</span></span><span style="display:flex;"><span>2    c
</span></span><span style="display:flex;"><span>3    a
</span></span><span style="display:flex;"><span>dtype: category
</span></span><span style="display:flex;"><span>Categories (3, object): [a, b, c]
</span></span></code></pre></div><p>There is also a <em>Categorical</em> object in <em>pandas</em> specifically for dealing with categorical data. The general constructor is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pandas.Categorical(values, categories, ordered)
</span></span></code></pre></div><p>If <em>categories</em> aren&rsquo;t provided, they are inferred from the values. <em>ordered</em> specifies whether or not on categories is bigger or not than other.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span>cat <span style="color:#f92672">=</span> cat<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>Categorical(
</span></span><span style="display:flex;"><span>    [<span style="color:#e6db74">&#39;a&#39;</span>,<span style="color:#e6db74">&#39;b&#39;</span>,<span style="color:#e6db74">&#39;c&#39;</span>,<span style="color:#e6db74">&#39;a&#39;</span>,<span style="color:#e6db74">&#39;b&#39;</span>,<span style="color:#e6db74">&#39;c&#39;</span>,<span style="color:#e6db74">&#39;d&#39;</span>],
</span></span><span style="display:flex;"><span>    [<span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;a&#39;</span>],
</span></span><span style="display:flex;"><span>    ordered<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>print(cat)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>[a, b, c, a, b, c, NaN]
</span></span><span style="display:flex;"><span>Categories (3, object): [c &lt; b &lt; a]
</span></span></code></pre></div><p><br /> <br /> <strong>obj.cat.categories</strong> command is used to get the categories of the object. <br /> <br /> Removing categories is also something that comes in handy and of course it&rsquo;s possible with <em>pandas</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series([<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;b&#34;</span>,<span style="color:#e6db74">&#34;c&#34;</span>,<span style="color:#e6db74">&#34;a&#34;</span>], dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;category&#34;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Original object:&#34;</span>)
</span></span><span style="display:flex;"><span>print(s)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;After removal:&#34;</span>)
</span></span><span style="display:flex;"><span>print( s<span style="color:#f92672">.</span>cat<span style="color:#f92672">.</span>remove_categories(<span style="color:#e6db74">&#34;a&#34;</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Original object:
</span></span><span style="display:flex;"><span>0    a
</span></span><span style="display:flex;"><span>1    b
</span></span><span style="display:flex;"><span>2    c
</span></span><span style="display:flex;"><span>3    a
</span></span><span style="display:flex;"><span>dtype: category
</span></span><span style="display:flex;"><span>Categories (3, object): [a, b, c]
</span></span><span style="display:flex;"><span>After removal:
</span></span><span style="display:flex;"><span>0    NaN
</span></span><span style="display:flex;"><span>1      b
</span></span><span style="display:flex;"><span>2      c
</span></span><span style="display:flex;"><span>3    NaN
</span></span><span style="display:flex;"><span>dtype: category
</span></span><span style="display:flex;"><span>Categories (2, object): [b, c]
</span></span></code></pre></div><h2 id="reading-data-from-dot-csv-files">Reading Data from <em>.csv</em>-files</h2>
<p>At the beginning probably each applications loads some date from the file system or link or whatever. <em>pandas</em> provides <strong>IO API</strong> for reading data from <em>.cvs</em>-files. The two main functions for reading text files are <strong>read_csv()</strong> and <strong>read_table()</strong>. They use similar procedures to intelligently convert tabular data into a <em>DataFrame</em> object. The general form of the functions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pandas.read_csv(filepath_or_buffer, sep=&#39;,&#39;, delimiter=None, header=&#39;infer&#39;,
</span></span><span style="display:flex;"><span>names=None, index_col=None, usecols=None
</span></span><span style="display:flex;"><span>---------
</span></span><span style="display:flex;"><span>pandas.read_csv(filepath_or_buffer, sep=&#39;\t&#39;, delimiter=None, header=&#39;infer&#39;,
</span></span><span style="display:flex;"><span>names=None, index_col=None, usecols=None
</span></span></code></pre></div><p>So say our <strong>temp.cvs</strong> looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>S.No,Name,Age,City,Salary
</span></span><span style="display:flex;"><span>1,Tom,28,Toronto,20000
</span></span><span style="display:flex;"><span>2,Lee,32,HongKong,3000
</span></span><span style="display:flex;"><span>3,Steven,43,Bay Area,8300
</span></span><span style="display:flex;"><span>4,Ram,38,Hyderabad,3900
</span></span></code></pre></div><p>and represents this:</p>
<table>
<thead>
<tr>
<th>S.No</th>
<th>Name</th>
<th>Age</th>
<th>City</th>
<th>Salary</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Tom</td>
<td>28</td>
<td>Toronto</td>
<td>20000</td>
</tr>
<tr>
<td>2</td>
<td>Lee</td>
<td>32</td>
<td>HongKong</td>
<td>3000</td>
</tr>
<tr>
<td>3</td>
<td>Steven</td>
<td>43</td>
<td>Bay Area</td>
<td>8300</td>
</tr>
<tr>
<td>4</td>
<td>Ram</td>
<td>38</td>
<td>Hyderabad</td>
<td>3900</td>
</tr>
</tbody>
</table>
<p>We can read this as:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;temp.csv&#34;</span>)
</span></span><span style="display:flex;"><span>print(df)
</span></span></code></pre></div><p>A lot of the data in <em>.cvs</em> files has a special column that specifies the index of the row. Pandas can take this into consideration:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;temp.csv&#34;</span>,index_col<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;S.No&#39;</span>])
</span></span><span style="display:flex;"><span>print(df)
</span></span></code></pre></div><p>Skipping rows can be achieved through the <em>skiprows=n</em> argument of <strong>read_cvs()</strong></p>
</section>

  
  


  
  
  <div id="disqus_thread"></div>

<script>

 function readCookie(name)
 {
   var nameEQ = name + "=";
   var ca = document.cookie.split(';');
   for(var i=0;i < ca.length;i++) {
     var c = ca[i];
     while (c.charAt(0)==' ') c = c.substring(1,c.length);
     if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
   }
   return null;
 }

 (function() {
   let cookieValue = readCookie('consent-settings');
   if (cookieValue)
   {
     var consentValue = cookieValue.toString();
     if (consentValue[1] === "1")
     {	    
       const disqusShortname = 'palikar-github-io';
       const script = document.createElement('script');
       script.src = 'https://' + disqusShortname + '.disqus.com/embed.js';
       script.setAttribute('data-timestamp', + new Date());
       document.head.appendChild(script);
     }
   }
 })();
 
</script>

  
</article>


    </main>

    <footer class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60">
  <div class="mr-auto">
    &copy; 2023
    <a class="link" href="">Stanislav Arnaudov</a>
  </div>
  <a class="link mx-6" href="#cookies" onclick="document.getElementById('consent-notice').style.display = 'block'; ">Cookie Policy</a>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank">Powered by Hugo</a>
  Theme: 
  <a class="link" href="https://github.com/nanxiaobei/hugo-paper" rel="noopener" target="_blank" >Paper 6</a>
</footer>


    <style>
    #consent-notice {padding: 1rem 1rem; display: none; text-align: center; position: fixed; bottom: 0; width: calc(100% - 2rem); background: #222; color: white;}
    #consent-notice span {margin-right: 1rem;}
    #consent-notice button {cursor: pointer; display: inline-block; width: auto;}
    #consent-notice span a {color: white; text-decoration: underline; text-decoration-color: rgba(255,255,255,0.5);}
    #consent-notice button.btn {margin-left: 0.5rem;}
    #consent-notice button.btn.manage-consent {background: rgba(255,255,255,0.1); font-weight: normal;}
    
    #consent-overlay {position: fixed; left: 0; top: 0; width: 100%; height: 100vh; display: none; background: rgba(0,0,0,0.75); z-index: 999999; overflow: auto; cursor: pointer;}
    #consent-overlay.active {display: flex;}
    #consent-overlay > div {background: white; width: 100%; max-width: 30rem; padding: 1.75rem; margin: auto; cursor: initial;}
    #consent-overlay > div > div {display: flex; align-items: flex-start; margin-bottom: 1rem;}
    #consent-overlay > div > div:last-child {margin: 0;}
    #consent-overlay h3 {padding-top: 0;}
    #consent-overlay input {margin-top: 0.3rem;}
    #consent-overlay label {display: block; color: black; }
    #consent-overlay .btn {margin-right: 0.5rem;}
    #consent-overlay button.btn.save-consent {background: rgba(0,0,0,0.6); font-weight: normal;}

    @media (max-width: 767px) {
        #consent-overlay > div {padding: 1.75rem 1rem;}
        #consent-notice span {display: block; padding-top: 3px; margin-bottom: 1.5rem;}
        #consent-notice button.btn {position: relative; bottom: 4px;}
    }
</style>

<div id="consent-notice">
  <span>We would like to use <a class="manage-consent" href="#manage-consent">third party code</a> to improve the functionality of this website.</span>
  <span><a class="link mx-6" href="/cookies" onclick="document.getElementById('consent-notice').style.display = 'block'; ">More Information</a></span>
  <button class="btn manage-consent">Manage preferences</button>
  <button class="btn deny-consent">Deny</button>
  <button class="btn approve-consent">Allow</button>
</div>

<div id="consent-overlay">
    <div>
        
            <div>
                <input type="checkbox" id="item0" value="1" name="item0"  />
                <label for="item0">
                  <h3>Google Anaytics (functional)</h3>
		  <p>This code gives us insight into the number of people that visit our website, where they are from and what they are clicking on.</p>
                </label>
            </div>
        
            <div>
                <input type="checkbox" id="item1" value="1" name="item1"  />
                <label for="item1">
                  <h3>Disqus Comment service</h3>
		  <p>The code allows to use the Disqus service for comments on the posts</p>
                </label>
            </div>
        
        <div>
            <button id="save-consent" class="btn save-consent" data-consentvalue="00">Save preferences</button>
            <button class="btn approve-consent">Allow all</button>
        </div>
    </div>
</div>
<script>

    const scripts = [];
    scripts[ 0 ] = "/js/ga.js";
    scripts[ 1 ] = "/js/disqus.js";

    function createCookie(name,value,days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days*24*60*60*1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + value + expires + "; path=/";
    }
    function readCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    }
    function eraseCookie(name) {
        createCookie(name,"",-1);
    }
    function denyAllConsentScripts() {
        var consentValue = "";
        scripts.forEach(function(){
            consentValue = consentValue + "0";
        });
        acceptSomeConsentScripts(consentValue);
    }
    function acceptAllConsentScripts() {
        var consentValue = "";
        scripts.forEach(function(){
            consentValue = consentValue + "1";
        });
        acceptSomeConsentScripts(consentValue);
    }
    function acceptSomeConsentScripts(consentValue) {
        setConsentInputs(consentValue);
        createCookie('consent-settings',consentValue,31);
        document.getElementById('consent-notice').style.display = 'none';
        document.getElementById('consent-overlay').classList.remove('active');
        loadConsentScripts(consentValue);
    }
    function loadConsentScripts(consentValue) {
        scripts.forEach(function(value,key){
            
            if(consentValue[key]=="1") {
                var s = document.createElement('script');
                s.type = 'text/javascript';
                s.src = value;
                document.body.appendChild(s);
            }
        });
    }
    function setConsentInputs(consentValue) {
        var elements = document.querySelectorAll('#consent-overlay input:not([disabled])');
        elements.forEach(function(el,index) {
            if(consentValue[index]=="1") el.checked = true;
            else el.checked = false;
        });
    }
    function setConsentValue() {
        var elements = document.querySelectorAll('#consent-overlay input:not([disabled])');
        var consentValue = "";
        elements.forEach(function(el) {
            if(el.checked) consentValue = consentValue + "1";
            else consentValue = consentValue + "0";
        });
        document.getElementById("save-consent").dataset.consentvalue = consentValue;
    }
 
    var elements = document.querySelectorAll('#consent-overlay input:not([disabled])');
    elements.forEach(function(el) {
        el.checked = false;
    });

    if(readCookie('consent-settings')) {
        var consentValue = readCookie('consent-settings').toString();
        setConsentInputs(consentValue);
        loadConsentScripts(consentValue);
    } else {
      document.getElementById('consent-notice').style.display = 'block';
    }
 var elements = document.querySelectorAll('.manage-consent');
    elements.forEach(function(el) {
        el.addEventListener("click",function() {
            document.getElementById('consent-overlay').classList.toggle('active');
        });
    });
    var elements = document.querySelectorAll('.deny-consent');
    elements.forEach(function(el) {
        el.addEventListener("click",function() {
            denyAllConsentScripts();
        });
    });
    var elements = document.querySelectorAll('.approve-consent');
    elements.forEach(function(el) {
        el.addEventListener("click",function() {
          acceptAllConsentScripts();
        });
    });
    document.getElementById("save-consent").addEventListener("click",function() {
        setConsentValue();
        acceptSomeConsentScripts(this.dataset.consentvalue);
    });
    document.getElementById("consent-overlay").addEventListener("click",function(e) {
        if (!document.querySelector("#consent-overlay > div").contains(e.target)){
            this.classList.toggle('active');
        }
    });
</script>


    

    


  </body>
</html>
